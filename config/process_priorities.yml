# Process Priority Configuration
# Defines how process priorities should be assigned based on workload types
# Used by ProcessPriorityManager for EEVDF scheduler optimization

# Priority Classes (nice values):
# CRITICAL: -20 (Highest priority, real-time-like)
# HIGH: -10 (High priority, interactive)
# NORMAL: 0 (Default priority)
# LOW: 10 (Low priority, batch processing)
# BACKGROUND: 19 (Lowest priority, background tasks)

priority_mappings:
  database:
    description: "Database servers and data stores"
    priority_class: HIGH  # -10
    patterns:
      - "mysqld"
      - "postgres"
      - "redis"
      - "mongodb"
      - "sqlite"
      - "mariadb"
      - "elasticsearch"
      - "cassandra"
      - "memcached"

  web_server:
    description: "Web servers and application servers"
    priority_class: HIGH  # -10
    patterns:
      - "nginx"
      - "apache"
      - "httpd"
      - "gunicorn"
      - "uwsgi"
      - "tomcat"
      - "node"
      - "npm"

  compute_intensive:
    description: "Compute-intensive applications and scientific computing"
    priority_class: NORMAL  # 0
    patterns:
      - "python.*numpy"
      - "python.*scipy"
      - "matlab"
      - "R "
      - "tensorflow"
      - "pytorch"
      - "octave"
      - "mpirun"

  background_tasks:
    description: "Background maintenance and batch tasks"
    priority_class: BACKGROUND  # 19
    patterns:
      - "cron"
      - "rsync"
      - "backup"
      - "updatedb"
      - "logrotate"
      - "anacron"
      - "sync"
      - "tar"
      - "gzip"

  interactive:
    description: "Interactive user applications"
    priority_class: HIGH  # -10
    patterns:
      - "firefox"
      - "chrome"
      - "chromium"
      - "vim"
      - "emacs"
      - "code"
      - "atom"
      - "sublime"
      - "vscode"

  system_critical:
    description: "Critical system processes (handle with care!)"
    priority_class: CRITICAL  # -20
    patterns:
      - "systemd"
      - "kernel"
      - "init"
      - "ssh"
      - "sshd"
      - "dbus"

  media_processing:
    description: "Media encoding and processing"
    priority_class: LOW  # 10
    patterns:
      - "ffmpeg"
      - "mencoder"
      - "handbrake"
      - "blender"
      - "gimp"

  compilation:
    description: "Software compilation and build processes"
    priority_class: LOW  # 10
    patterns:
      - "gcc"
      - "g++"
      - "clang"
      - "make"
      - "cmake"
      - "cargo"
      - "rustc"
      - "javac"

# Workload-specific priority boosts
# When a specific workload is detected as dominant, these boosts apply
workload_focus_boost:
  enabled: true
  boost_amount: 5  # Reduce nice value by this amount (increase priority)
  max_priority: -20  # Never exceed this priority level

# Process filtering rules
filter_rules:
  # Process IDs to never modify
  exclude_pids:
    - 0  # swapper
    - 1  # init/systemd
    - 2  # kthreadd
  
  # Process name prefixes to exclude (kernel threads)
  exclude_prefixes:
    - "["
    - "kthreadd"
    - "ksoftirqd"
    - "kworker"
  
  # Minimum CPU usage to consider for priority adjustment (percentage)
  min_cpu_threshold: 0.5
  
  # Minimum memory usage to consider (percentage)
  min_memory_threshold: 0.1

# Safety settings
safety:
  # Require confirmation before modifying critical system processes
  confirm_critical: true
  
  # Maximum number of processes to adjust in one operation
  max_processes_per_run: 100
  
  # Allow restoring original priorities on cleanup
  enable_restore: true
  
  # Dry run mode (log changes without applying)
  dry_run: false
